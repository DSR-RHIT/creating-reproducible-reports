---
layout: page
title: initial data examination 
tagline: load cell calibration 
output: html_document
---


### Initialize the workspace.

```{r message = FALSE}
# set root directory for knitr to match the working directory for R
library(knitr) 
opts_knit$set(root.dir = '../')

# load libraries used by this script
library(readxl) # for read_excel() 
library(dplyr)  # for pipe %>%
library(readr)  # for write_csv()
```

### Look at the raw data

Data file received 2016-06-10. 

```{r}
# assign the relative path to the file for read_excel()
raw_data_file <- 'data/2016-06-raw/calibration-data.xlsx'
```

Use the *readxl* package just to look at the first few rows of the data set. 

```{r}
# set col_names to FALSE to check if the file has more than one row of headings
raw_data <- read_excel(raw_data_file, col_names = FALSE)
head(raw_data, n = 10L)
```

### Save the meta-data

The *read_excel()* function has added the arbitrary column labels *X0*, *X1*, etc. The first column is meta-data. I'll separate it and save it. The calibration data set begins in the second column, row 9. 

```{r message = FALSE}
library(dplyr)
meta_data <- raw_data %>%
	select(X0) %>%
	as.data.frame()
head(meta_data, n = 8L)
```

Remove the NAs; change the column name to match this file name.  

```{r}
meta_data <- meta_data %>%
	filter(X0 != 'NA') %>%
	rename(gather_001_loadcell.Rmd = X0) %>%
	as.data.frame()
meta_data
```

Write to file. 

```{r}
write_csv(meta_data, 'data/set001_calibr_01_gather-meta-data.csv')
```

Because *plyr* (if used in a subsequent script) has to be loaded before *dplyr*, I'll unload *dplyr*. 
 
```{r}
# unload dplyr in case plyr is loaded in a subsequent script.
# always load plyr before dplyr.
detach(package:dplyr,  unload = TRUE)
```

Next file is *set001_calibr_02_gather-wide-data.Rmd*. 
